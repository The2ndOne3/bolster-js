(function(a){if(a===undefined||a.version.toFloat()<1.4){console.log("Bolster requires at least MooTools 1.4.5");return}if(a.More===undefined||a.More.version.toFloat()<1.2){console.log("Bolster requires at least MooTools More 1.2.5");return}window.Bolster={version:"0.1.0",extend:function(b,c){this.bolsterfx[b]=c}};this.temp={};window.addEvent("domready",function(){this.input={count:$(document.head).getChildren('link[type="text/css"]').length,loaded:0,text:""};$$("style").each(function(b){this.input.text+=b.get("html")}.bind(this));$(document.head).getChildren('link[type="text/css"]').each(function(b){new Request({url:b.get("href"),onSuccess:function(c){this.input.text+=c;this.input.loaded++;if(this.input.loaded===this.input.count){this.parse(this.input.text)}}.bind(this)}).send()},this)}.bind(this));this.parse=function(b){b=b.split(/[{}]/g);b.pop();this.rules=[];for(this.temp.i=0;this.temp.i<b.length/2;this.temp.i++){this.rules.push({selector:b[2*this.temp.i].trim().replace(/[\t\n]/g,""),css:b[2*this.temp.i+1],declarations:[]})}this.rules.each(function(c){this.temp.declarations=c.css.split(/;/g);this.temp.declarations.pop();this.temp.declarations.each(function(d){d=d.split(/:/g);c.declarations.push({property:d[0].trim().replace(/[\t\n]/g,""),value:d[1].trim().replace(/[\t\n]/g,"")})})}.bind(this));this.rules.each(function(c){c.declarations.each(function(d){this.get_effects().each(function(e){if(d.property==="-bolster-"+e){this.temp.value=d.value.replace(/ +(?= )/g,"");this.temp.value=d.value.replace(/, /g,",");this.temp.args=[];this.temp.last=0;this.temp.quoted=false;this.temp.bucket=[];for(this.temp.i=0,this.temp.len=this.temp.value.length;this.temp.i<this.temp.len;this.temp.i++){switch(this.temp.value[this.temp.i]){case"'":case'"':if(this.temp.quoted===false){this.temp.quoted=this.temp.value[this.temp.i];this.temp.last++}else{if(this.temp.quoted===this.temp.value[this.temp.i]){this.temp.bucket.push(this.temp.value.substring(this.temp.last,this.temp.i));this.temp.last=this.temp.i+1;this.temp.quoted=false}}break;case" ":if(this.temp.quoted===false){this.temp.bucket.push(this.temp.value.substring(this.temp.last,this.temp.i));this.temp.last=this.temp.i+1}break;case",":if(this.temp.quoted===false){this.temp.bucket.push(this.temp.value.substring(this.temp.last,this.temp.i));this.temp.last=this.temp.i+1;this.temp.args.push(this.temp.bucket);this.temp.bucket=[]}break}}this.temp.bucket.push(this.temp.value.substring(this.temp.last));this.temp.args.push(this.temp.bucket);this.temp.cleaned=[];this.temp.args.each(function(f){f=f.clean();this.temp.nonempty=[];f.each(function(g){if(g!==""){this.temp.nonempty.push(g)}}.bind(this));if(this.temp.nonempty.length<=1){this.temp.cleaned.push(this.temp.nonempty[0])}else{this.temp.cleaned.push(this.temp.nonempty)}}.bind(this));if(this.temp.cleaned.length<=1){this.temp.cleaned=this.temp.cleaned[0]}this.set_effect(c.selector,e,this.temp.cleaned)}}.bind(this))}.bind(this))}.bind(this))}.bind(this);this.get_effects=function(){return Object.keys(this.bolsterfx)};this.set_effect=function(b,d,c){this.bolsterfx[d](b,c)};this.bolsterfx={"test-property":function(b,c){console.log("Selector: "+b+";");console.log(c)},"abs-height":function(c,b){if(b==="auto"){$$("selector").each(function(d){d.setStyle("height",d.getSize().y)})}else{if(b=="auto-continuous"){this.add_continuous(function(){$$("selector").each(function(d){d.setStyle("height",d.getSize().y)})})}else{sheets_width:for(this.temp.i=0,this.temp.lenA=document.styleSheets.length;this.temp.i<this.temp.lenA;this.temp.i++){this.temp.sheet=document.styleSheets.length[this.temp.i];for(this.temp.j=0,this.temp.lenB=this.temp.sheet.cssRules.length;this.temp.j<this.temp.lenB;this.temp.j++){this.temp.rule=document.styleSheets[this.temp.i].cssRules[this.temp.j];if(this.temp.rule.selectorText===c){this.temp.rule.style.setProperty("width",b);break sheets_width}}}}}},"abs-width":function(c,b){if(b==="auto"){$$("selector").each(function(d){d.setStyle("width",d.getSize().x)})}else{if(b=="auto-continuous"){this.add_continuous(function(){$$("selector").each(function(d){d.setStyle("width",d.getSize().x)})})}else{sheets_width:for(this.temp.i=0,this.temp.lenA=document.styleSheets.length;this.temp.i<this.temp.lenA;this.temp.i++){this.temp.sheet=document.styleSheets.length[this.temp.i];for(this.temp.j=0,this.temp.lenB=this.temp.sheet.cssRules.length;this.temp.j<this.temp.lenB;this.temp.j++){this.temp.rule=document.styleSheets[this.temp.i].cssRules[this.temp.j];if(this.temp.rule.selectorText===c){this.temp.rule.style.setProperty("width",b);break sheets_width}}}}}},};this.continuous=[];this.add_continuous=function(b){this.continuous.push(b)}.bind(this);(function(){this.continuous.each(function(b){b()})}).bind(this).periodical(1/32)}).bind({})(window.MooTools);